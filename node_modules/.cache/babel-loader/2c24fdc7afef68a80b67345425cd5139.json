{"ast":null,"code":"import axios from 'axios';\nconst instance = axios.create({\n  baseURL: 'http://localhost:3030' // baseURL: 'https://connections-api.herokuapp.com',\n\n});\n\nconst setToken = token => {\n  if (token) {\n    return instance.defaults.headers.authorization = `Bearer ${token}`;\n  }\n\n  instance.defaults.headers.authorization = '';\n};\n\nexport const signUp = async data => {\n  const {\n    data: result\n  } = await instance.post('api/users/register', data);\n  setToken(result.token);\n  return result;\n};\nexport const login = async data => {\n  const {\n    data: result\n  } = await instance.post('api/users/login', data); // console.log(result.token)\n\n  setToken(result.token);\n  return result;\n};\nexport const getCurrent = async token => {\n  try {\n    setToken(token);\n    const {\n      data\n    } = await instance.get('api/users/current');\n    return data;\n  } catch (error) {\n    setToken();\n    throw error;\n  }\n};\nexport const logout = async () => {\n  const {\n    data\n  } = await instance.post('api/users/logout');\n  setToken();\n  return data;\n};\nexport default instance;","map":{"version":3,"sources":["C:/Users/Дарья/Desktop/GoIT/node/your-pet-project-frontend/src/services/auth-api.js"],"names":["axios","instance","create","baseURL","setToken","token","defaults","headers","authorization","signUp","data","result","post","login","getCurrent","get","error","logout"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,MAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAE,uBADmB,CAE5B;;AAF4B,CAAb,CAAjB;;AAKA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACxB,MAAIA,KAAJ,EAAW;AACT,WAAQJ,QAAQ,CAACK,QAAT,CAAkBC,OAAlB,CAA0BC,aAA1B,GAA2C,UAASH,KAAM,EAAlE;AACD;;AACDJ,EAAAA,QAAQ,CAACK,QAAT,CAAkBC,OAAlB,CAA0BC,aAA1B,GAA0C,EAA1C;AACD,CALD;;AAMA,OAAO,MAAMC,MAAM,GAAG,MAAMC,IAAN,IAAc;AAClC,QAAM;AAAEA,IAAAA,IAAI,EAAEC;AAAR,MAAmB,MAAMV,QAAQ,CAACW,IAAT,CAAc,oBAAd,EAAoCF,IAApC,CAA/B;AACAN,EAAAA,QAAQ,CAACO,MAAM,CAACN,KAAR,CAAR;AAEA,SAAOM,MAAP;AACD,CALM;AAOP,OAAO,MAAME,KAAK,GAAG,MAAMH,IAAN,IAAc;AACjC,QAAM;AAAEA,IAAAA,IAAI,EAAEC;AAAR,MAAmB,MAAMV,QAAQ,CAACW,IAAT,CAAc,iBAAd,EAAiCF,IAAjC,CAA/B,CADiC,CAEjC;;AACAN,EAAAA,QAAQ,CAACO,MAAM,CAACN,KAAR,CAAR;AACA,SAAOM,MAAP;AACD,CALM;AAOP,OAAO,MAAMG,UAAU,GAAG,MAAMT,KAAN,IAAe;AACvC,MAAI;AACFD,IAAAA,QAAQ,CAACC,KAAD,CAAR;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAW,MAAMT,QAAQ,CAACc,GAAT,CAAa,mBAAb,CAAvB;AACA,WAAOL,IAAP;AACD,GAJD,CAIE,OAAOM,KAAP,EAAc;AACdZ,IAAAA,QAAQ;AACR,UAAMY,KAAN;AACD;AACF,CATM;AAWP,OAAO,MAAMC,MAAM,GAAG,YAAY;AAChC,QAAM;AAAEP,IAAAA;AAAF,MAAW,MAAMT,QAAQ,CAACW,IAAT,CAAc,kBAAd,CAAvB;AACAR,EAAAA,QAAQ;AACR,SAAOM,IAAP;AACD,CAJM;AAMP,eAAeT,QAAf","sourcesContent":["import axios from 'axios';\r\n\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'http://localhost:3030',\r\n  // baseURL: 'https://connections-api.herokuapp.com',\r\n});\r\n\r\nconst setToken = token => {\r\n  if (token) {\r\n    return (instance.defaults.headers.authorization = `Bearer ${token}`);\r\n  }\r\n  instance.defaults.headers.authorization = '';\r\n};\r\nexport const signUp = async data => {\r\n  const { data: result } = await instance.post('api/users/register', data);\r\n  setToken(result.token);\r\n  \r\n  return result;\r\n};\r\n\r\nexport const login = async data => {\r\n  const { data: result } = await instance.post('api/users/login', data);\r\n  // console.log(result.token)\r\n  setToken(result.token);\r\n  return result;\r\n};\r\n\r\nexport const getCurrent = async token => {\r\n  try {\r\n    setToken(token);\r\n    const { data } = await instance.get('api/users/current');\r\n    return data;\r\n  } catch (error) {\r\n    setToken();\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  const { data } = await instance.post('api/users/logout');\r\n  setToken();\r\n  return data;\r\n};\r\n\r\nexport default instance;\r\n"]},"metadata":{},"sourceType":"module"}